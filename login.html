<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login / Register</title>
    <link rel="icon" type="image/png" href="https://tse1.mm.bing.net/th/id/OIP.eliQ98n5bIhzdbRyverlAwHaHa?pid=Api&P=0&h=180"/>
  <style>
    body { 
      padding: 20px; 
    }
    .container { 
      max-width: 400px; 
      margin: 50px auto; 
      background: white; 
      padding: 30px; 
      border-radius: 6px; 
    }
  </style>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2 id="formTitle">Login</h2>
    <form id="authForm">
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit" id="submitBtn">Login</button>
    </form>
    <div class="switch">
      <span id="switchText">Don't have account?</span>
      <a href="#" id="toggleLink">Register</a>
    </div>
  </div>

  <script>
    const authForm = document.getElementById("authForm");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const formTitle = document.getElementById("formTitle");
    const submitBtn = document.getElementById("submitBtn");
    const switchText = document.getElementById("switchText");
    const toggleLink = document.getElementById("toggleLink");

    let isLogin = true; 

    function switchMode() {
      isLogin = !isLogin;
      if (isLogin) {
        formTitle.textContent = "Login";
        submitBtn.textContent = "Login";
        switchText.textContent = "Don't have account?";
        toggleLink.textContent = "Register";
      } else {
        formTitle.textContent = "Register";
        submitBtn.textContent = "Register";
        switchText.textContent = "Already have account?";
        toggleLink.textContent = "Login";
      }
    }

    toggleLink.addEventListener("click", function (e) {
      e.preventDefault();
      switchMode();
    });

    authForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const email = emailInput.value.trim();
      const password = passwordInput.value.trim();
      if (!email || !password) {
        alert("Enter both email and password.");
        return;
      }

      let users = JSON.parse(localStorage.getItem("users")) || [];

      if (isLogin) {
        const user = users.find(u => u.email === email && u.password === password);
        if (user) {
          localStorage.setItem("loggedInUser", email);
          alert("Login successful.");
          window.location.href = "home.html";
        } else {
          alert("Invalid credentials.");
        }
      } else {
        const exists = users.some(u => u.email === email);
        if (exists) {
          alert("User already exists. Please login.");
          return;
        }
        users.push({ email, password });
        localStorage.setItem("users", JSON.stringify(users));
        alert("Registration success. You can now login.");
        switchMode();
      }
    });
    localStorage.clear();

  </script>
</body>
</html>
